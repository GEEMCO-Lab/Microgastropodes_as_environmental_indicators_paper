# Microgastropods as Environmental Indicators

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Repository for data and code for analyses and figures of the paper by Kelmo et al. (202X) "Microgastropods as Environmental Indicators".

## Project Overview

This project investigates the use of microgastropods as environmental indicators in aquatic ecosystems. The repository contains all data, analysis scripts, and documentation needed to reproduce the results presented in the manuscript.

## Repository Structure

```
.
├── data/
│   ├── raw/              # Original, unmodified data files
│   │   └── README.md     # Documentation for raw data
│   └── processed/        # Cleaned and processed data
│       └── README.md     # Documentation for processed data
├── scripts/
│   ├── 01_data_cleaning.R           # Data validation and cleaning
│   ├── 02_data_processing.R         # Data transformation and preparation
│   ├── 03_statistical_analysis.R    # Statistical analyses
│   ├── 04_create_figures.R          # Figure generation
│   ├── run_all.R                    # Master script to run all analyses
│   └── utils.R                      # Utility functions
├── outputs/
│   ├── figures/          # Generated figures
│   └── tables/           # Generated tables and results
├── manuscript.Rmd        # RMarkdown manuscript
├── manuscript.qmd        # Quarto manuscript
├── requirements.txt      # R package dependencies
├── renv.lock            # renv lock file for reproducibility
├── Microgastropodes_as_environmental_indicators_paper.Rproj  # RStudio project file
└── README.md            # This file
```

## Getting Started

### Prerequisites

- R (version 4.3.0 or higher recommended)
- RStudio (optional but recommended)

### Installation

1. **Clone the repository:**
```bash
git clone https://github.com/GEEMCO-Lab/Microgastropodes_as_environmental_indicators_paper.git
cd Microgastropodes_as_environmental_indicators_paper
```

2. **Open the R project:**
   - Double-click `Microgastropodes_as_environmental_indicators_paper.Rproj` to open in RStudio
   - Or set your working directory to the project root

3. **Install required R packages:**

Option A - Using the provided requirements:
```r
# Install packages listed in requirements.txt
packages <- c("tidyverse", "here", "vegan", "ggplot2", "patchwork", 
              "corrplot", "scales", "knitr", "rmarkdown", "quarto")
install.packages(packages)
```

Option B - Using renv for exact version matching:
```r
# Install renv if not already installed
install.packages("renv")

# Restore the project library from renv.lock
renv::restore()
```

## Usage

### Running the Complete Analysis

To reproduce all analyses and figures:

```r
# Open R in the project directory
source("scripts/run_all.R")
```

This will execute all analysis scripts in order:
1. Data cleaning and validation
2. Data processing and transformation
3. Statistical analyses
4. Figure generation

### Running Individual Scripts

You can also run scripts individually:

```r
# Data cleaning
source("scripts/01_data_cleaning.R")

# Data processing
source("scripts/02_data_processing.R")

# Statistical analysis
source("scripts/03_statistical_analysis.R")

# Generate figures
source("scripts/04_create_figures.R")
```

### Generating the Manuscript

**RMarkdown version:**
```r
rmarkdown::render("manuscript.Rmd")
```

**Quarto version:**
```r
quarto::quarto_render("manuscript.qmd")
```

Or use the command line:
```bash
quarto render manuscript.qmd
```

## Data

### Raw Data

Raw data files should be placed in the `data/raw/` directory. See `data/raw/README.md` for expected file formats and descriptions.

**Expected data files:**
- `microgastropods_samples.csv` - Sample collection data
- `environmental_variables.csv` - Environmental measurements
- `species_abundance.csv` - Species identification and abundance
- `site_metadata.csv` - Site characteristics

### Processed Data

Processed data is generated by the analysis scripts and saved in `data/processed/`. These files are created automatically and should not be manually edited.

## Outputs

### Figures

All figures are saved to `outputs/figures/` in PNG format at 300 dpi, suitable for publication.

### Tables

Statistical results and summary tables are saved to `outputs/tables/` in CSV format.

## Key Analyses

1. **Community Composition Analysis**
   - Species diversity indices (Shannon, Simpson, richness, evenness)
   - Community matrix construction

2. **Ordination Analysis**
   - Non-metric Multidimensional Scaling (NMDS)
   - Environmental variable fitting

3. **Environmental Relationships**
   - Correlation analyses
   - Linear models
   - Indicator species analysis

4. **Visualization**
   - Diversity patterns across sites
   - Species-environment relationships
   - Ordination plots
   - Correlation heatmaps

## Reproducibility

This project follows best practices for reproducible research:

- All analyses are scripted in R
- Package versions are documented in `renv.lock`
- Random seeds are set where applicable
- File paths use the `here` package for portability
- Raw data is preserved separately from processed data

## Contributing

If you find any issues or have suggestions for improvements, please open an issue or submit a pull request.

## Citation

If you use this code or data, please cite:

```
Kelmo et al. (202X). Microgastropods as Environmental Indicators. 
Journal Name, Volume(Issue), Pages. DOI: XX.XXXX/XXXXX
```

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Contact

For questions or additional information, please contact:
- GEEMCO Lab: [contact information]
- Lead Author: [email]

## Acknowledgments

*Add acknowledgments for funding sources, field assistants, and other contributors.*

---

**Last Updated:** `r Sys.Date()`
